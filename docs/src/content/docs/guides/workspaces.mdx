---
title: Workspaces
description: Understanding and configuring AllAgents workspaces.
---

A workspace is a directory that contains your AI tooling configuration.

## Directory Structure

```
my-workspace/
├── .allagents/
│   ├── workspace.yaml    # Workspace configuration
│   └── sync-state.json   # Tracks synced files (auto-generated)
├── .claude/
│   └── commands/         # Claude-specific commands (from plugins)
├── AGENTS.md             # Agent instructions (auto-copied from template)
└── CLAUDE.md             # Claude-specific instructions (optional)
```

### Agent Files

AllAgents automatically copies `AGENTS.md` and `CLAUDE.md` from your template source:

- **AGENTS.md** - Universal agent instructions (works with multiple clients)
- **CLAUDE.md** - Claude-specific instructions

Both files receive `WORKSPACE-RULES` injection, which tells AI agents to read `workspace.yaml` for repository paths.

If your template only has `AGENTS.md` and `claude` is in your clients list, AllAgents automatically copies `AGENTS.md` to `CLAUDE.md` so Claude has its instruction file.

## Creating a Workspace

```bash
# Create from default template
allagents workspace init my-workspace

# Create from existing template
allagents workspace init my-workspace --from ./path/to/template
```

## workspace.yaml

```yaml
workspace:
  source: "."           # Source for agent files (local path or GitHub URL)
  files: []             # Additional files to copy (AGENTS.md/CLAUDE.md are auto-included)

repositories:
  - path: ../my-project
    owner: myorg
    repo: my-project
    description: My main project

plugins:
  - code-review@claude-plugins-official

clients:
  - claude
  - copilot
  - cursor
```

### Workspace Source

The `workspace.source` field specifies where to copy agent files from:

```yaml
# Local path (converted to absolute during init)
workspace:
  source: "."
  files: []

# GitHub repository
workspace:
  source: "myorg/my-templates/workspaces/default"
  files:
    - config/settings.json   # Additional files beyond AGENTS.md/CLAUDE.md
```

When using `--from` during init, relative paths are automatically converted to absolute paths so that `workspace sync` can pull updates from the original source.

## Syncing Plugins

```bash
allagents workspace sync
```

### Non-Destructive Sync

AllAgents uses **non-destructive sync** to protect your files:

- **First sync**: Overlays plugin files without deleting existing files
- **Subsequent syncs**: Only removes files that AllAgents previously synced

This means your personal commands, skills, or customizations in `.claude/commands/` etc. are never deleted - only files that came from plugins are managed.

AllAgents tracks synced files in `.allagents/sync-state.json`. This file is automatically created and updated on each sync.

### Dry Run

Preview what would happen without making changes:

```bash
allagents workspace sync --dry-run
```
